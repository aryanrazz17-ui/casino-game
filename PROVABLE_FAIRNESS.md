# Provable Fairness Documentation

## Introduction

All games on this platform utilize a **Provably Fair** system. This allows players to verify that every game result is determined fairly and was not manipulated by the server or the client.

## How it Works

We use a standard cryptographic method involving three inputs:

1.  **Server Seed**: A random 32-byte hexadecimal string generated by the server.
2.  **Client Seed**: A random string chosen by your browser (or you).
3.  **Nonce**: A number that increments with every bet you place.

### The Process

1.  Before a round starts, we generate a `Server Seed`. We show you the `SHA256 Hash` of this seed immediately. This commits us to the result before you play.
2.  You provide a `Client Seed` (or we auto-generate one for you).
3.  The result is calculated using `HMAC_SHA256(ServerSeed, ClientSeed:Nonce)`.
4.  After the round, we reveal the unhashed `Server Seed`.
5.  You can verify that the hash matches the one we showed you earlier, and that the result generates correctly using the code below.

## Verification Code (Node.js)

```javascript
const crypto = require('crypto');

function verifyResult(serverSeed, clientSeed, nonce) {
    const hash = crypto
        .createHmac('sha256', serverSeed)
        .update(`${clientSeed}:${nonce}`)
        .digest('hex');
        
    console.log('HMAC:', hash);
    
    // For Float (Dice, Crash):
    // Take first 8 chars -> int / 2^32
    const floatVal = parseInt(hash.substring(0, 8), 16) / 0xffffffff;
    console.log('Float Result:', floatVal);
}
```

## Game Specific Implementation

### Dice
- **Input**: Float (0-1)
- **Output**: `Float * 100` (Rounded to 2 decimals)

### Mines
- **Input**: Shuffle
- **Process**: We run a seeded Fisher-Yates shuffle on an array `[0..24]`.
- **Mines**: The first `N` numbers in the shuffled array are the mine positions.

### Color Prediction / Win Go
- **Input**: Float
- **Output**: `Float * 10` (Integer 0-9) taken from the first 8 bytes.
- **Numbers**:
    - 0: Red + Violet
    - 5: Green + Violet
    - 1,3,7,9: Green
    - 2,4,6,8: Red
    - Small: 0-4
    - Big: 5-9

### Crash / Aviator
- **Input**: Float
- **Formula**: `multiplier = (100 * E) - H` (Standard crash formula variant).
- *Note:* Our simplified implementation uses `max(1.00, (0.99 * 2^32) / (2^32 - h))`

## Security
- **Atomicity**: All wallet transactions are processed atomically.
- **Seeds**: A new server seed is generated for every discrete session or round reset.
